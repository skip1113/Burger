<h1>Eat Da Burger!</h1>
<div class="container">
    <div class="row">
        <div class="col-md-6" id="add-burg">
            <h2>Create a Burger!</h2>
            <form id="create-burger" class="create-form">

                <div class="form-group" style="overflow: auto;">
                    <label for="ca">Burger:</label>
                    <input type="text" id="ca" name="name">
                </div>
                <button type="submit">Add Da Burger</button>
            </form>
           
        </div>
        <div class="col-md-4" id="created">
            
            <h2>Created Burgers</h2>
            <ul>
                {{#each burgers}}
                    {{#unless devoured}}
                        {{> burgers/burger-block devoured=true}}
                    {{/unless}}
                {{/each}}
            </ul>
        </div>
        <div class="col-sm-4" id="devoured-burg">
            <h2>Devourings</h2>
            <ul>
                {{#each burgers}}
                    {{#if devoured}}
                        {{> burgers/burger-block devoured=false}}
                    {{/if}}
                {{/each}}

            </ul>
        </div>
        {{!-- <div class="col-md-4">
            <h2>Create a Burger!</h2>
            <form id="create-burger" class="create-form">

                <div class="form-group" style="overflow: auto;">
                    <label for="ca">Burger:</label>
                    <input type="text" id="ca" name="name">
                </div>
                <button type="submit">Add Da Burger</button>
            </form>
           
        </div> --}}
</div>

<script type="text/javascript">
$("#create-burger").on("submit", function(event) {
    event.preventDefault();

    var newBurger = {
        name: $("#create-burger [name=name]").val().trim()
    };
    $.ajax("/api/burgers", {
        type: "POST",
        data: newBurger
    }).then(
        function() {
            console.log("Created New Burger");
            location.reload();
        }
    );
});
$(".change-devour").on("click", function(event) {
    var id = $(this).data("id");
    var ate = $(this).data("newdevour");
    var devouredState = {
        devoured: ate
    };
    $.ajax("/api/burgers/" + id, {
        type: "PUT",
        data: devouredState
    }).then(function() {
        console.log("Changed Devoured to true ", ate);
        location.reload();
    })
});

$("#delBurg").on("click", function(event) {
    var id = $(this).data("id");
    $.ajax("/api/burgers/" + id, {
        type: "DELETE"
    }).then(
        function() {
            console.log("Deleted Burger: ", id);
            location.reload();
        }
    );
});
</script>